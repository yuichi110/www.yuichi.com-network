<!DOCTYPE html>
<html lang="ja-JP">
 <head>
  <meta charset="utf-8"/>
  <meta content="IE=edge" http-equiv="X-UA-Compatible"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <meta content="Sample Description" name="description"/>
  <meta content="Yuichi Ito" name="author"/>
  <title>
   Network Boot Camp
  </title>
  <link href="/img/favicon.ico" rel="shortcut icon"/>
  <!-- Bootstrap -->
  <link href="./assets/css/bootstrap.css" rel="stylesheet">
   <link href="./assets/css/bootstrap-theme.css" rel="stylesheet"/>
   <link href="./assets/css/bootstrap_u1.css" rel="stylesheet"/>
   <!-- Font -->
   <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet"/>
   <link href="https://fonts.googleapis.com/earlyaccess/mplus1p.css" rel="stylesheet">
    <!-- Code Highlight -->
    <link href="./assets/css/codehilite_colorful.css" rel="stylesheet"/>
    <!-- Custom -->
    <link href="./assets/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="./assets/icomoon/style.css" rel="stylesheet"/>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
   </link>
  </link>
 </head>
 <body>
  <div class="backgroundLayer">
   <!-- Fixed navbar -->
   <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
     <div class="navbar-header">
      <button aria-controls="navbar" aria-expanded="false" class="navbar-toggle collapsed" data-target="#navbar" data-toggle="collapse" type="button">
       <span class="sr-only">
        Toggle navigation
       </span>
       <span class="icon-bar">
       </span>
       <span class="icon-bar">
       </span>
       <span class="icon-bar">
       </span>
      </button>
      <a class="navbar-brand active" href="./">
       Python
      </a>
     </div>
     <div class="navbar-collapse collapse" id="navbar">
      <ul class="nav navbar-nav">
       <li class="">
        <a href="./navi.html">
         Navi
        </a>
       </li>
       <li class="">
        <a href="./qa.html">
         QA
        </a>
       </li>
       <li class="">
        <a href="./books.html">
         Books
        </a>
       </li>
       <li style="font-family: avenger">
        <a href="/">
         GC
        </a>
       </li>
      </ul>
     </div>
    </div>
   </nav>
   <div class="container">
    <div class="u1-header">
     <a href="./" style=" text-decoration: none;">
      <div class="u1-title">
       Network Boot Camp
      </div>
      <p class="lead u1-description">
       ネットワーク構築の訓練プログラム
      </p>
     </a>
    </div>
    <div class="row">
     <div class="col-sm-8 u1-main">
      <!-- GENERATED HTML START -->
      <!-- GENERATED HTML START -->
      <h1>
       機器の種類
      </h1>
      <h2>
       概要
      </h2>
      <h2>
       機器の種類について
      </h2>
      <p>
       ネットワークを学ぶときはTCP/IPや、パケットの転送といった抽象的な話が中心となります。
初心者の人にとってパケットという目に見えないデータや、
見たことも触ったこともない機械でそれがどう扱われるかということは想像し辛いかもしれません。
      </p>
      <p>
       実際に機械に物理的に触って、設定を加えることが理解への一番の近道なのでしょうが、
それはネットワークエンジニアやIT管理者といった限られた人しかできません。
本気で学ぶのであれば型落ちした安い機器をオークションなどで買ってもいいと思いますが、
ここでは実際の機器を紹介することで理解の手助けをしたいと思います。
      </p>
      <p>
       ネットワークで利用される機器といっても、役割に応じて多種多様なものがあります。
おおまかにカテゴリ分けをすると、以下のグループに分けられます。
      </p>
      <ul>
       <li>
        PCやサーバーといったネットワークを利用する機器
       </li>
       <li>
        信号の変換や長距離のデータ転送のためのネットワーク機器
       </li>
       <li>
        同一ネットワーク内でL2転送をするためのネットワーク機器
       </li>
       <li>
        異なるネットワーク間のL3転送をするためのネットワーク機器
       </li>
       <li>
        ファイアウォールやロードバランサーといった特定用途のためのネットワーク機器
       </li>
      </ul>
      <p>
       ネットワークの中心となるのはL2転送及びL3転送です。
他のセキュリティ機器などはそれらの基礎知識を知った上で操作をするものですので、
まずはL2機器であるスイッチとL3機器であるルーターについて学ぶのがよいです。
      </p>
      <h2>
       ホスト
      </h2>
      <p>
       ホストはネットワークを経由した通信の発信元と最終的な宛先地となる機器です。
通信を中継するスイッチやルーターではなく、
たとえば「Yahooのページを見ようとするノートPC」と「ノートPCにデータを提供するウェブサーバー」などです。
      </p>
      <p>
       ネットワーク機器は多数のホストから送られてくる通信を中継するための機器であるため、
それぞれの通信の主役ではなく、あくまでも手助けをしているにすぎません。
AさんとBさんの手紙のやりとりでいえば、主役はAさんとBさんでありポストや郵便局は単なる手紙の仲介者にすぎないのと同じです。
      </p>
      <p>
       一方、ホストは通信の主役となります。
手紙のやりとりでいえば、宛先と送り主がホストだといえます。
ホストは他のホストからの自分に関係のない通信を無視します。
興味があるのはあくまでも「自分から相手にデータを送ること」と「自分宛てに届いたデータの処理をすること」だけです。
通信に関わる機器は様々ですが、ホストはその終端(エンド)に存在しているため、
「
       <strong>
        エンドホスト
       </strong>
       」と呼ばれることもあります。
      </p>
      <p>
       ホストはネットワーク機器に比べると複雑です。
ネットワーク機器はホストに比べると高価であるため勘違いされやすいですが、
ネットワーク機器は大量の処理に適しているだけであり、動作としてはそれほど複雑なことはやっていません。
一方、ホストはネットワーク機器ほど大量の処理はできないものの、
通信の内容そのものに責任を持って動作しています。
      </p>
      <h4>
       図:クライアントサーバーモデル
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/01.png"/>
      </p>
      <p>
       通信をしあう両ホストの関わりですが、
一般的には「
       <strong>
        クライアントサーバーモデル
       </strong>
       」と呼ばれる構成をとっています。
「
       <strong>
        サーバー
       </strong>
       」は何かを提供するという意味で、
「
       <strong>
        クライアント
       </strong>
       」はお客さんという意味なのでサービスを受けるという意味になります。
      </p>
      <p>
       たとえばYahooのウェブページの閲覧でいえば、Yahooのウェブサーバーは名前の通りページを提供するサーバーであり、
それを閲覧するPCやスマホはクライアントです。
同じようにネットワークを介してプリンタを使う場合は、
プリンターがサーバーであり、プリンターを使うPCがクライアントです。
      </p>
      <p>
       想像すれば分かるようにYahooが持つウェブサーバーの数はYahooにアクセスするPCの数よりも少ないです。
一般的なクライアントサーバーモデルでは、少数のサーバーが多数のクライアントを持つという構成になっています。
スイッチやルーターははホストとホストの通信の内容には全く興味を持っていないため、
誰がクライアントで誰がサーバーであるかは全く意識をしていません。
単純に宛先のMACアドレスとIPアドレスに従ってデータを転送しているだけです。
      </p>
      <p>
       なお、業務用の高機能なスイッチやルーターであれば、
ホストから届けられたフレームやパケットの転送をするだけでなく、
自分自身から管理用の通信を行うことができます。
それらの管理用の通信においては、ネットワーク機器もホストとしてふるまいます。
      </p>
      <h2>
       L2機器
      </h2>
      <p>
       L2の機器は同一ネットワーク内の複数の機器間の通信を正しい宛先に届けるという役割を持っています。
これを使うことで「10.0.0.0/8」や「172.16.0.0/24」といった単体のネットワークに繋げる物理ポート数を増やせるため、
多くの機器を同じネットワークに接続できるようになります。
      </p>
      <p>
       L2の機器だけでなく、ホストやL3の機器も同一ネットワーク内での通信にはMACアドレスを使ったL2転送をします。
ただ、L2の機器は他の機器への通信を中継するのにたいして、
ホストやL3の機器は同一ネットワーク内の通信を中継することはありません。
      </p>
      <p>
       インターネットという大きな世界で見れば、データの転送の主役はL3の機器であるルーターなどとなります。
ただ、同じネットワーク内での転送の主役はL2機器であるスイッチです。
スイッチの存在なくしてネットワークを構築することはできません。
      </p>
      <p>
       L2の機器はスイッチと呼ばれていますが、家庭用と業務用などでいくつかの細かい分類があります。
単純な家庭用スイッチの説明をしたあとで、業務用スイッチの説明をします。
      </p>
      <h3>
       ノンインテリジェントスイッチ
      </h3>
      <p>
       一般的な家庭で利用している5000円以下のスイッチはほぼ「
       <strong>
        ノンインテリジェントスイッチ
       </strong>
       」です。
家電量販店や通販などで買うようなものだと、バッファローやIOデータのスイッチが日本だと主流かと思います。
      </p>
      <p>
       ノンインテリジェントという名前が表すように、
この種類のスイッチはL2のフレーム転送以外に特別な機能はありません。
MAC学習と宛先に応じて適切なポートからフレームを転送するだけが仕事です。
つまり、単純にネットワークに接続する機器のポートが足りないから増やすという目的で使われます。
PCのUSBポートが足りない際にUSBハブをさすのと似ています。
      </p>
      <h4>
       図: ノンインテリジェントスイッチ
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/02.png"/>
      </p>
      <p>
       ノンインテリジェントスイッチは安価で電源ケーブルとLANケーブルをさすだけで動きます。
業務用のL2スイッチよりも手軽に導入できるため、ネットワークが一つしかない自宅内では気軽に利用することができます。
      </p>
      <p>
       ノンインテリジェントスイッチに似た製品に「
       <strong>
        ハブ
       </strong>
       」というものがあります。
用途はネットワークの拡張という点では同じですが、これはL2の機器ではなくL1の機器です。
イーサネットプロトコルを理解せず、単純に電気信号的に複数のケーブルを接続しているため、
届いたフレームを他の全てのポートに拡散させます。
      </p>
      <p>
       ノンインテリジェントスイッチが安価に購入できる現在では、
あえてハブを選ぶ理由はありません。
ハブはパフォーマンスがスイッチに比べて悪く、
トラフィックが他のポートに流れるという点でセキュリティ的に問題があります。
      </p>
      <h3>
       L2スイッチ
      </h3>
      <p>
       業務用のスイッチにもいくつかの種類があり、L2の機能のみを持つものは「L2スイッチ」と呼ばれています。
ノンインテリジェントスイッチと異なり、様々な機能があり管理もできるため「インテリジェントスイッチ」と呼ばれることもあります。
本サイトでスイッチと記載する場合は基本的に業務用のスイッチをさします。
      </p>
      <p>
       L2スイッチの主な役割はノンインテリジェントスイッチと同じくMAC学習と適切なインターフェースへのフレーム転送です。
ただ、それに加えてVLANという「ブロードキャストドメインを区切る仕組み」を使うことができます。
これは複数のネットワークをVLANごとに使うことができるということとほぼ同義です。
      </p>
      <p>
       また、スイッチ間を不適切にケーブルを接続してもネットワークのなかでループが発生しないようにするといった、
ネットワークを保護する仕組みなどもあります。
      </p>
      <h4>
       図: インテリジェントスイッチ
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/03.png"/>
      </p>
      <p>
       この業務用のスイッチはネットワーク管理者によって適切に設定管理されることを前提としています。
ノンインテリジェントスイッチは電源さえ入れれば動きますが、
業務用のスイッチは設定を加えないと使えません。
      </p>
      <h3>
       アクセスポイント
      </h3>
      <p>
       アクセスポイントはホストに対してwifiによる無線アクセスを提供する機器です。
      </p>
      <p>
       ケーブルの有無という物理的な大きな違いはるものの、
アクセスポイントの動作はL2スイッチと大差はありません。
アクセスポイントが繋がるネットワークを物理的(電波)に拡張して、
参加できるホストの数を増やします。
      </p>
      <h4>
       図: アクセスポイント(AP)
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/04.png"/>
      </p>
      <p>
       スイッチのように物理的なポートがあるわけではないため多くの機器を繋げますが、
あまり多くのホストを接続して同時に利用するとパフォーマンスが低下します。
自宅で利用するようなものであれば20台程度までで、業務用のものであれば40台程度を上限として利用します。
業務用のものは「あるアクセスポイントが壊れても、他のアクセスポイントがカバーできる」ことを前提として設計するので、
実際には20-30人にひとつで、15-20m四方をカバーするという程度の設計が多いようです。
      </p>
      <p>
       アクセスポイントはホストに対して「SSID」を見せています。
これは複数アクセスポイントが存在する状況下で、どのネットワークに属するか(どのアクセスポイントに接続するか)を選択させる意味があります。
また、SSIDにパスワードをかけることで第三者が勝手にネットワークに接続してくることを防げます。
スイッチは「物理的に接続できる」といったかたちでセキュリティを保てますが、
wifiは近くにいる部外者にも電波が届いてしまうため、セキュリティにより気を配る必要があります。
      </p>
      <p>
       家庭向けのアクセスポイントはネットワークをホストに提供するという機能のみを持ちます。
業務用のアクセスポイントだとVLANが使えたり、
アクセスポイント用のコントローラーで複数のアクセスポイントを一括管理したり、
高度な認証システムによるアクセス制御ができるという特徴があります。
もちろんこれらの設定には専門的な知識が必要となります。
      </p>
      <h3>
       ハイパーバイザーと仮想スイッチ
      </h3>
      <p>
       昨今の物理サーバーのCPUパワーは高く、多くのメモリーを搭載することができます。
このような状況で2005年あたりから「
       <strong>
        仮想化
       </strong>
       」と呼ばれる「1つの物理ハードウェアで複数のOSを動かす仕組み」が利用され始めました。
VMWare Player(fusion)やVirtualBoxを使っているかたであれば、それの業務版だと思ってもらえば分かりやすいかもしれません。
      </p>
      <p>
       仮想化では「
       <strong>
        ハイパーバイザー
       </strong>
       」と呼ばれる特別なOSが、内部で「
       <strong>
        仮想マシン(VM)
       </strong>
       」と呼ばれるOSを複数動かします。
ハイパーバイザーが物理的に持つCPUやメモリを複数の仮想マシンに分け与えることで資源を共有します。
1台のハードウェアでサーバーOSを何台も動かせるため経済的で、なおかつハードウェア故障の影響も小さくなるため多くの企業が導入しています。
      </p>
      <p>
       仮想マシンもネットワークに接続する必要があるため、ハイパーバイザーはその内部で動く仮想マシンに対してL2スイッチを提供しています。
ハイパーバイザーが持つスイッチですので当然ながら物理的なハードウェアを持つスイッチではなく、
ハイパーバイザーがソフトウェアとして実現しているスイッチです。
これは「
       <strong>
        仮想スイッチ
       </strong>
       」と呼ばれています。
      </p>
      <h4>
       図: ハイパーバイザーと仮想スイッチ
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/05.png"/>
      </p>
      <p>
       利用するハイパーバイザーの種類により仮想スイッチの詳細は変わってきますが、
VLAN程度であればどのハイパーバイザーの仮想スイッチも使えます。
ハイパーバイザーとして比較的主流であるVMWare社のESXiなどだと、
仮想化独自の機能が仮想スイッチに搭載されていたりします。
      </p>
      <h2>
       L3機器
      </h2>
      <p>
       L3の機器の役割はネットワークとネットワークを接続することです。
送信元のネットワークから宛先となるネットワークまで、
ネットワークの境界にある機器で「宛先IPアドレスとルーティングテーブルを比較して正しい中継先に渡す」ということを繰り返してパケットを届けます。
      </p>
      <p>
       L3の機器同士や、L3の機器とホストは同一ネットワークに属しています。
そのため、「次に誰にパケットを渡すか」という判断はL3の範疇ですが、
実際にパケットを相手に届けるためには「同一ネットワークのL2通信」を使います。
      </p>
      <p>
       L3の機器はL2の通信に関わらないと勘違いしている人は結構多いので注意をしてください。
L2スイッチのように同一ネットワーク間にある他の機器のトラフィックを転送することはしませんが、
自分自身はスイッチを使う側としてL2通信をしています。
      </p>
      <h3>
       ルーター
      </h3>
      <p>
       ルーターには家庭用のルーター(ブロードバンドルーターと呼ばれる)と業務用のルーターがあります。
家庭用のルーターは純粋なルーターとはかけ離れているため、ここでは業務用のルーターについて扱います。
      </p>
      <p>
       スイッチは同じネットワークに属する機器同士を繋げるために利用されます。
多くのPCやサーバーが企業には存在するため、スイッチのポート数は24ポートや48ポートと比較的多くなっています。
一方、ルーターの役割は「組織内の複数のネットワーク」や「異なる組織間のネットワーク」を接続することです。
「直接接続されるネットワークの数」は「ひとつのネットワークに繋がる機器の数」よりも少ないため、
一般的にルーターのポート数はスイッチよりも少なくなっています。
      </p>
      <p>
       ルーターとスイッチは宛先までパケットをバケツリレーのようにして伝播させていくという点では大きな違いはありません。
転送する基準がMACアドレスであるかIPアドレスであるかという違いはありますが、基本的な考え方は同じです。
ただ、両者で大きく異なるのは「宛先までどのようにしてデータを届ければいいかということを、どのように学習するか」という点です。
L2の世界とL3の世界ではこれが根本的に異なっています。
詳しい話はL3転送の仕組みのページで扱います。
      </p>
      <p>
       ただ、上記の図にあるようにルーターはネットワークとネットワークの境界に存在していて、
同じネットワークにいる「別のネットワークにも属するルーター」にパケットを転送するということを繰り返すことで目的地までバケツリレーを繰り返します。
転送をするルーターはネットワークの全体像(地図)は把握できていませんが、
「このネットワーク宛のパケットはここに送る」という道路標識のようなルールを知っているので、
それに従ってパケットを正しい宛先に転送し続けます。
      </p>
      <h4>
       図: ルーター
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/06.png"/>
      </p>
      <p>
       このネットワーク間でのパケット転送がルーターの最も重要な役割ですが、
それ以外にも様々な機能が利用できます。
たとえば「
       <strong>
        NAT
       </strong>
       」と呼ばれるIPアドレスの変換機能もルーターの重要な役割の1つです。
      </p>
      <p>
       NATはIPアドレスを変換するための仕組みです。
自宅や職場のPCを思い浮かべて頂くと分かると思いますが、
多くのネットワークに繋がる機器はインターネットを利用できる必要はありますが、
インターネット越しに他の機器から利用されることはほとんどありません。
むしろインターネット側から自分のPCに接続されるほうがセキュリティ的に困る場合がほとんどです。
      </p>
      <p>
       使えるIPの数に限りがあるといった背景などもあり、
一般的な組織ではNATと「
       <strong>
        プライベートアドレス
       </strong>
       」を使っています。
プライベートアドレスはインターネットで使わないことになっている特別なアドレスです。
インターネットに存在できないということは、どの組織でも利用することができるということです。
      </p>
      <p>
       インターネットとの接続地点にあるルーターは、
プライベートアドレスを持つホストからインターネットへの通信を「インターネットで使えるアドレス」に変換して送信します。
多くの場合は送信元ホストのIPをルーターが持つインターネット側のアドレスに変換します。
      </p>
      <p>
       パケットを届けられたサーバーにとっては送信元は本当のホストではなく、NATで変換されたアドレスです。
そのため送信側のNATルーターに対してデータを送り返します。
      </p>
      <p>
       NATルーターはサーバーから送り返されたパケットの内容を確認して、
それが変換された内部ホストからの通信であることを把握します。
そうすると、再度パケットのアドレスを変換前のものに戻す処理をして、
もともとのホストにパケットを届けます。
      </p>
      <h2>
       L3スイッチ
      </h2>
      <p>
       L3スイッチはL3機能を持つスイッチで、ルーターとスイッチの両方の機能を併せ持つ便利な機器です。
現在の業務用ネットワーク機器の主流はL3スイッチとなっています。
      </p>
      <p>
       昔はルーターがL3(ネットワーク間の転送)を担当し、
スイッチがL2(同一ネットワーク内の転送)を担当するという明確な役割分担がありました。
これはネットワークの構成が非常に分かりやすくなるという利点があるものの、
機器の台数が増えるためコストが増えるという問題がありました。
L3スイッチはそのようなネットワークの構築コストを下げたいという要望から生まれました。
      </p>
      <p>
       L2スイッチとL3スイッチの大きな違いはルーティング能力の有無です。
L3スイッチもL2スイッチと同じくVLANが使えるため、複数のネットワークに属することができます。
L3スイッチはVLANごとに仮想的なインターフェースである「
       <strong>
        SVI
       </strong>
       」を作成することで、
そのSVIの間でルーティングができます。
ルーティングの仕組みはインターフェースがSVIになっているということ以外はルーターと全く同じです。
      </p>
      <h4>
       図: VLANインターフェース(SVI)によるルーティング
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/07.png"/>
      </p>
      <p>
       ルーターが使える機能にはNATなど様々なものがありますが、
L3スイッチはルーティング程度の機能しか使えません。
そのため、「L3スイッチがあればルーターはいらない」とはなりません。
インターネットと接するL3機器のみルーターとして、組織内部はL3スイッチを使うという構成が一般的です。
      </p>
      <p>
       また、L3スイッチがあればL2スイッチは不要ですが、L3スイッチのほうが高価です。
そのためL2機能だけが必要であればL2スイッチを使うことが多いです。
ユーザーPCを接続するアクセススイッチをL2スイッチとして、コアスイッチをL3スイッチをする構成も多いです。
      </p>
      <h3>
       ブロードバンドルーター
      </h3>
      <p>
       ブロードバンドルーターは家庭や小さいオフィスで使われるインターネットへの接続を提供するルーターです。
先に扱った業務用のルーターとはかなり仕組みが異なっていて、
以下の図のように複数の製品を組合せたような構成になっています。
      </p>
      <h4>
       図: ブロードバンドルーターの中身
      </h4>
      <p class="blog-img">
       <img alt="image" class="img-responsive" src="./0010_image/08.png"/>
      </p>
      <p>
       ブロードバンドルーターに繋がるネットワークは「家の中」と「家の外」の2つだけです。
      </p>
      <p>
       家の中の通信はノンインテリジェントスイッチとアクセスポイントのようにMACアドレスを基準にして転送を行い、
家の外への通信はNATでIPアドレスを変換してサービスプロバイダーのルーターに処理を依頼するだけです。
      </p>
      <p>
       ブロードバンドルーターの設定はノンインテリジェントスイッチに比べると複雑です。
サービスプロバイダーに接続する設定と、家の中のネットワークのアドレスの設定、
wifiのSSIDとパスワードあたりの設定が必要になります。
      </p>
      <p>
       ブロードバンドルーターには様々な機能が搭載されていますが、
自宅ネットワークなどの決まりきった使い方しかできません。
ただ、同じことを業務用の機器で実現しようとすると複雑になるため、
小規模な組織のネットワークであければブロードバンドルーターで十分な場合もあります。
      </p>
      <p>
       ただ、ブロードバンドルーターを使ったネットワークは、
社内のセキュリティはほとんどなく、障害が発生するとネットワークが全て使えなくなるような構成です。
SOHO(小規模オフィス)向けの製品であればブロードバンドルーターよりも業務レベルに近いネットワークを構築できます。
      </p>
      <h2>
       その他のネットワーク機器
      </h2>
      <p>
       ネットワーク機器はL2転送及びL3転送以外のものもあります。
それらの機器もパケット転送に関わりますが、なんらかの特定用途のために利用されます。
      </p>
      <h3>
       コンバーター
      </h3>
      <p>
       コンバーターはL1の機器です。
ネットワークのパケットはイーサネットやIPといったフォーマットを持っています。
それらは01のデジタル形式です。
      </p>
      <p>
       パケットがデジタルであったとしても、
それを機器同士でやりとりする際は「RJ45のツイストケーブル上の電気信号」や
「ファイバーケーブル上の光信号」といったかたちで処理をします。
これらのケーブル上を流れる信号は特性があり、
たとえばファイバーであれば「高価だが減衰が少ないため長距離の通信に使える」といったものとなります。
      </p>
      <h4>
       図: コンバーター
      </h4>
      <p>
       RJ45とファイバーを変換したり、ファイバーをRJ45に変換するといった用途。
光をさらに長距離に届けるためにリピーターとして利用するといった使われ方をします。
      </p>
      <h3>
       ファイアーウォール
      </h3>
      <p>
       ある一定規模以上の組織の内部には複数のネットワークが存在しています。
社員がアクセスするネットワークだけでなく、社内のゲスト向けのネットワークも存在するため、
全てのネットワークが全てのネットワークに対してアクセスできるという状況は望ましくありません。
      </p>
      <p>
       そのようなネットワーク間のアクセスを「これは許可する」
「これは許可しない」と細かく制御できる機械がファイアーウォールです。
ルーターやL2/L3スイッチも大まかなアクセス制御はできますが、
ファイアーウォールはそれに特化した機器であるため、
より細かいアプリケーションレベルでのフィルタなどを行うこともできます。
      </p>
      <h4>
       図: フィアーウォール
      </h4>
      <p>
       また、ファイアーウォールの重要な役割にVPNの提供というものもあります。
VPNは遠くのネットワークに「直接」接続するための機能で、
ネットワーク的に遠い機器同士の間で「トンネル」を作成します。
これを使うことで自宅から会社のオフィスのネットワークに接続したり、
離れた場所にあるオフィス間を直接接続することができます。
      </p>
      <h3>
       ロードバランサー
      </h3>
      <p>
       クライアント/サーバーモデルでは一般的にクライアントの数がサーバーに比べて膨大な数となります。
日本規模や世界規模のサービスの場合、それを1台のサーバーが全て処理するということはかなり難しいです。
1台のサーバーで処理できないのであれば、2台3台と増やしていけばいいということになります。
そうすれば2倍3倍のトラフィックを処理できますし、
そして1台のサーバーが故障などでダウンしたとしても他のサーバーがカバーをすることができます。
      </p>
      <p>
       ネットワーク機器は一般的にサーバーに比べると大量のトラフィックを処理することができ、
壊れにくいという特徴があります。
この特徴をサーバーへの負荷分散に特化させた機器が「
       <strong>
        ロードバランサー
       </strong>
       」と呼ばれるものです。
      </p>
      <h4>
       図: ロードバランサー
      </h4>
      <p>
       ロードバランサーに設定したIPアドレス(本来はサーバーに設定されるもの)に対してアクセスがあると、
ロードバランサーはそれを裏側にある複数のサーバーに対して負荷を分散させるように転送を行います。
イメージとしてはNATの逆の動きをしていると思えば分かりやすく、
同一セッションの通信は裏側にある同一サーバーに対して継続して転送されます。
      </p>
      <h3>
       SANスイッチ
      </h3>
      <p>
       「
       <strong>
        SANスイッチ
       </strong>
       」は大規模なインフラで利用されることがあるストレージとサーバーを接続するネットワーク機器です。
この機器及びそれを利用するサーバーとストレージは「
       <strong>
        FC(Fibre Channel)
       </strong>
       」というTCP/IPとは全く異なる通信プロトコルを使って、
ストレージのデータをやりとりします。
このストレージ用のネットワークのことを「
       <strong>
        SAN(Storage Area Network)
       </strong>
       」と呼びます。
SANで使われる機器を繋げる機器なのでSANスイッチと呼ばれています。
      </p>
      <h4>
       図: SANスイッチ
      </h4>
      <p>
       SANを理解する上で重要なことは2つあります。
まずひとつめはストレージは壊れるものであり、
なおかつサーバーレベルでは利用率がそれほど高くならないというものです。
巨大なインフラを構築する場合はノードごとのストレージ管理は非効率であるため、
冗長性をかみした上で集約して管理したほうが運用が楽になります。
また、仮想化の世界ではストレージの共有が必須であり、
SANとストレージという構成がその標準的なものとなっています。
      </p>
      <p>
       ふたつめの重要なことは、SANの世界はTCP/IPの世界と大きく異なっていて信頼性が非常に重要ということです。
TCP/IPの世界では信頼性のないネットワークをTCPなどの仕組みを使ってカバーしていますが、
SAN上を流れるFCの通信は絶対的な信頼性を持たせる必要があります。
あるファイルをコピーしているのに、それが欠けたり遅れたりすると大きな問題になります。
      </p>
      <p>
       なお、現在はTCP/IPネットワークの世界の信頼性が高まってきているため、
わざわざSANとストレージを構築せずに、
TCP/IP上で使えるストレージ共有プロトコルである「
       <strong>
        NFS
       </strong>
       」や「
       <strong>
        SMB
       </strong>
       」を使うという選択肢も多く取られます。
SAN及びストレージを扱えるエンジニアが非常に少なく、機器も高コストになりがちです。
新規に導入するのであればよく検討を行うことが望ましいです。
      </p>
      <!-- GENERATED HTML END -->
      <!-- GENERATED HTML END -->
      <nav>
       <ul class="pager">
        <li id="previous-li">
         <a href="./001.html" id="previous-a">
          ← Previous
         </a>
        </li>
        <li>
         <a href="#">
          Page Top
         </a>
        </li>
        <li class="pager-next" id="next-li">
         <a href="./003.html" id="next-a">
          Next →
         </a>
        </li>
       </ul>
      </nav>
     </div>
     <!-- /.blog-main -->
     <div class="col-sm-3 col-sm-offset-1 u1-sidebar">
      <!-- SNS start -->
      <div class="sidebar-module">
       <ul class="social-buttons">
        <li>
         <!-- hatena -->
         <a class="hatena-bookmark-button" data-hatena-bookmark-lang="ja" data-hatena-bookmark-layout="basic-label-counter" href="http://b.hatena.ne.jp/entry/" title="このエントリーをはてなブックマークに追加">
          <img alt="このエントリーをはてなブックマークに追加" height="20" src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" style="border: none;" width="20"/>
         </a>
         <script async="async" charset="utf-8" src="https://b.st-hatena.com/js/bookmark_button.js" type="text/javascript">
         </script>
        </li>
        <li>
         <!-- FB -->
         <div class="fb-like" data-action="like" data-layout="button_count" data-share="true" data-show-faces="false" data-size="small">
         </div>
         <div id="fb-root">
         </div>
         <script>
          (function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0];
                    if (d.getElementById(id)) return;
                    js = d.createElement(s);
                    js.id = id;
                    js.src = "//connect.facebook.net/ja_JP/sdk.js#xfbml=1&version=v2.9";
                    fjs.parentNode.insertBefore(js, fjs);
                  }(document, 'script', 'facebook-jssdk'));
         </script>
        </li>
        <li>
         <!-- twitter -->
         <a class="twitter-share-button" href="https://twitter.com/share">
          Tweet
         </a>
         <script>
          ! function(d, s, id) {
                    var js, fjs = d.getElementsByTagName(s)[0],
                      p = /^http:/.test(d.location) ? 'http' : 'https';
                    if (!d.getElementById(id)) {
                      js = d.createElement(s);
                      js.id = id;
                      js.src = p + '://platform.twitter.com/widgets.js';
                      fjs.parentNode.insertBefore(js, fjs);
                    }
                  }(document, 'script', 'twitter-wjs');
         </script>
        </li>
        <li>
         <!-- G+ -->
         <!-- head 内か、body 終了タグの直前に次のタグを貼り付けてください。 -->
         <script async="" defer="" src="https://apis.google.com/js/platform.js">
          {
                    lang: 'ja'
                  }
         </script>
         <!-- 共有ボタン を表示したい位置に次のタグを貼り付けてください。 -->
         <div class="g-plus" data-action="share" data-annotation="none" data-height="24">
         </div>
        </li>
        <li>
         <!-- IN/Share -->
         <script src="//platform.linkedin.com/in.js" type="text/javascript">
          lang: ja_JP
         </script>
         <script data-counter="right" type="IN/Share">
         </script>
        </li>
       </ul>
      </div>
      <!-- SNS end -->
      <div class="sidebar-module">
       <p class="sidebar-heading">
        Network Boot Camp
       </p>
       <ol class="list-unstyled">
        <li>
         <a href="./">
          トップページ
         </a>
        </li>
        <li>
         <a href="./navi.html">
          目次
         </a>
        </li>
        <li>
         <a href="./qa.html">
          質問と回答
         </a>
        </li>
        <li>
         <a href="./books.html">
          おすすめネットワーク書籍
         </a>
        </li>
       </ol>
      </div>
      <div class="sidebar-module">
       <p class="sidebar-heading">
        ネットワークの基礎
       </p>
       <ol class="list-unstyled">
        <li>
         <a href="./001.html">
          自宅ネットワークの仕組み
         </a>
        </li>
        <li>
         <a href="./002.html">
          ネットワーク機器
         </a>
        </li>
        <li>
         <a href="./003.html">
          ネットワークケーブル
         </a>
        </li>
        <li>
         <a href="./004.html">
          Cisco機器の操作方法
         </a>
        </li>
        <!--

              <li>
                <a href="./005.html">
         同一ネットワーク内のL2転送の仕組み
        </a>
              </li>
              <li>
                <a href="./006.html">
         異なるネットワーク間のL3転送の仕組み
        </a>
              </li>
              <li>
                <a href="./007.html">
         ルーティングプロトコルによる経路学習
        </a>
              </li>
              <li>
                <a href="./008.html">
         その他のルーティングの重要トピック
        </a>
              </li>
              <li>
                <a href="./009.html">
         ホストが使うプロトコル
        </a>
              </li>
              <li>
                <a href="./010.html">
         VLAN
        </a>
              </li>
              <li>
                <a href="./011.html">
         L3スイッチとVLAN間ルーティング
        </a>
              </li>
              <li>
                <a href="./012.html">
         リンクの冗長化
        </a>
              </li>
              <li>
                <a href="./013.html">
         L2ネットワークの冗長化
        </a>
              </li>
              <li>
                <a href="./013.html">
         L2ネットワークの冗長化
        </a>
              </li>
              <li>
                <a href="./013.html">
         L3ネットワークの冗長化
        </a>
              </li>
              <li>
                <a href="./013.html">
         ACLによるパケットのフィルタ
        </a>
              </li>
              <li>
                <a href="./013.html">
         NAT
        </a>
              </li>
              <li>
                <a href="./013.html">
         BGPによるAS間接続
        </a>
              </li>
              <li>
                <a href="./013.html">
         TCP/IP入門
        </a>
              </li>
              <li>
                <a href="./013.html">
         IPアドレスの設計
        </a>
              </li>
              <li>
                <a href="./013.html">
         TCPによる輻輳制御
        </a>
              </li>
              <li>
                <a href="./013.html">
         IPv6
        </a>
              </li>
              <li>
                <a href="./013.html">
         ネットワークの監視
        </a>
              </li>
              <li>
                <a href="./013.html">
         パケットのキャプチャ
        </a>
              </li>
              -->
       </ol>
      </div>
      <!-- amazon -->
      <div class="sidebar-module">
       <script type="text/javascript">
        amazon_ad_tag = "grit-22";
              amazon_ad_width = "300";
              amazon_ad_height = "250";
              amazon_ad_link_target = "new";
       </script>
       <script src="http://ir-jp.amazon-adsystem.com/s/ads.js">
       </script>
      </div>
      <!-- amazon end-->
      <div class="sidebar-module">
       <p class="sidebar-heading">
        Python入門
       </p>
       <ol class="list-unstyled">
        <li>
         <a href="https://github.com/yuichi110/www.yuichi.com-python" target="_blank">
          <span class="fa fa-github">
          </span>
          GitHub Repository
         </a>
        </li>
        <li>
         <a href="https://twitter.com/yuichi110" target="_blank">
          <i class="fa fa-twitter">
          </i>
          Twitter
         </a>
        </li>
        <li>
         <a href="https://www.linkedin.com/in/yuichiito/" target="_blank">
          <span class="fa fa-linkedin">
          </span>
          Linkedin (英語)
         </a>
        </li>
        <li class="li-none">
         <a href="#" id="rw_email_contact">
          <span class="fa fa-envelope">
           Mail
          </span>
         </a>
         <script type="text/javascript">
          var _rwObsfuscatedHref0 = "mai";
                  var _rwObsfuscatedHref1 = "lto";
                  var _rwObsfuscatedHref2 = ":yu";
                  var _rwObsfuscatedHref3 = "ich";
                  var _rwObsfuscatedHref4 = "i@y";
                  var _rwObsfuscatedHref5 = "uic";
                  var _rwObsfuscatedHref6 = "hi.";
                  var _rwObsfuscatedHref7 = "com";
                  var _rwObsfuscatedHref = _rwObsfuscatedHref0 + _rwObsfuscatedHref1 + _rwObsfuscatedHref2 + _rwObsfuscatedHref3 + _rwObsfuscatedHref4 + _rwObsfuscatedHref5 + _rwObsfuscatedHref6 + _rwObsfuscatedHref7;
                  document.getElementById("rw_email_contact").href = _rwObsfuscatedHref;
         </script>
        </li>
       </ol>
      </div>
      <div class="sidebar-module">
       <!-- padding for side bar -->
       <div class="hidden-xs">
        <p style="height:500px">
        </p>
       </div>
      </div>
     </div>
     <!-- /.blog-sidebar -->
    </div>
    <!-- /.row -->
   </div>
   <!-- /.container -->
   <footer>
    <div class="u1-footer-top">
    </div>
    <div class="u1-footer">
     <p>
      Copyright © 2017 Yuichi Ito All Rights Reserved.
     </p>
     <p align="center">
      修正依頼がある場合は右ページよりページURLと問題箇所を指摘願います。
      <a href="https://github.com/yuichi110/www.yuichi.com-python/issues">
       <span class="fa fa-github">
       </span>
       Git Hub Issues
      </a>
     </p>
    </div>
   </footer>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js">
   </script>
   <script src="./assets/js/bootstrap.min.js">
   </script>
   <script src="./assets/js/delete_useless_dom.js">
   </script>
   <!-- GOOGLE ANALYTICS -->
   <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
          (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
          m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');
      ga('create', 'UA-4830860-7', 'auto');
      ga('send', 'pageview');
   </script>
  </div>
  <!-- end of background -->
 </body>
</html>
